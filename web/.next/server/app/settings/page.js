(()=>{var e={};e.id=938,e.ids=[938],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4821:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},2048:e=>{"use strict";e.exports=require("fs")},629:e=>{"use strict";e.exports=require("fs/promises")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},4564:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>b,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>i}),r(7322),r(7587),r(5866);var s=r(3191),a=r(8716),n=r(7922),o=r.n(n),c=r(5231),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);r.d(t,l);let i=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7322)),"C:\\Users\\My PC\\mern\\diary\\web\\app\\settings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7587)),"C:\\Users\\My PC\\mern\\diary\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\My PC\\mern\\diary\\web\\app\\settings\\page.tsx"],u="/settings/page",b={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},7046:(e,t,r)=>{let s={a03868e9a7215603f9d673cd4ee1cd7a48e8acaa:()=>Promise.resolve().then(r.bind(r,228)).then(e=>e.insert),b972c7f1ab6d0603a1c99b74ffcb332ec62f2c59:()=>Promise.resolve().then(r.bind(r,228)).then(e=>e.updateDatabaseConfig),f20badd17b67320a503118ef51c8ac258764e88b:()=>Promise.resolve().then(r.bind(r,228)).then(e=>e.get)};async function a(e,...t){return(await s[e]()).apply(null,t)}e.exports={a03868e9a7215603f9d673cd4ee1cd7a48e8acaa:a.bind(null,"a03868e9a7215603f9d673cd4ee1cd7a48e8acaa"),b972c7f1ab6d0603a1c99b74ffcb332ec62f2c59:a.bind(null,"b972c7f1ab6d0603a1c99b74ffcb332ec62f2c59"),f20badd17b67320a503118ef51c8ac258764e88b:a.bind(null,"f20badd17b67320a503118ef51c8ac258764e88b")}},8384:(e,t,r)=>{Promise.resolve().then(r.bind(r,6993))},6993:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(326),a=r(7577),n=r(5047),o=r(2881);let c=(0,o.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var l=r(2522);let i=(0,o.Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),d=(0,o.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),u=(0,o.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),b=(0,o.Z)("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),x=(0,a.forwardRef)((e,t)=>{let[r,n]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[x,p]=(0,a.useState)(""),[f,m]=(0,a.useState)(!1),{state:g,dispatch:h}=(0,l.a)();return(0,a.useImperativeHandle)(t,()=>({getConfig:()=>({accessKeyId:r,secretKey:o,region:x})})),(0,a.useEffect)(()=>{(async()=>{if(g.dbConfig?.type==="aws"){let e=g.dbConfig.config;n(e.accessKeyId||""),c(e.secretKey||""),p(e.region||"")}else n(process.env.NEXT_PUBLIC_AWS_ACCESS_KEY_ID||""),c(process.env.NEXT_PUBLIC_AWS_SECRET_ACCESS_KEY||""),p(process.env.NEXT_PUBLIC_AWS_REGION||"")})()},[g.dbConfig]),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"accessKeyId",className:"block text-sm font-medium text-brown-800 dark:text-blue-200",children:"AWS Access Key ID"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:s.jsx(i,{className:"h-4 w-4 text-brown-600 dark:text-blue-400"})}),s.jsx("input",{id:"accessKeyId",type:"text",value:r,onChange:e=>n(e.target.value),className:"w-full pl-10 px-4 py-2 bg-transparent border-b-2 border-brown-600 dark:border-blue-500 focus:outline-none focus:border-brown-900 dark:focus:border-blue-300 transition-colors text-brown-800 dark:text-blue-100",placeholder:"Enter your AWS Access Key ID"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"secretKey",className:"block text-sm font-medium text-brown-800 dark:text-blue-200",children:"AWS Secret Key"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:s.jsx(i,{className:"h-4 w-4 text-brown-600 dark:text-blue-400"})}),s.jsx("input",{id:"secretKey",type:f?"text":"password",value:o,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-10 py-2 bg-transparent border-b-2 border-brown-600 dark:border-blue-500 focus:outline-none focus:border-brown-900 dark:focus:border-blue-300 transition-colors text-brown-800 dark:text-blue-100",placeholder:"Enter your AWS Secret Key"}),s.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-brown-600 dark:text-blue-400 hover:text-brown-800 dark:hover:text-blue-200",children:f?s.jsx(d,{className:"h-4 w-4"}):s.jsx(u,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"region",className:"block text-sm font-medium text-brown-800 dark:text-blue-200",children:"AWS Region"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:s.jsx(b,{className:"h-4 w-4 text-brown-600 dark:text-blue-400"})}),s.jsx("input",{id:"region",type:"text",value:x,onChange:e=>p(e.target.value),className:"w-full pl-10 px-4 py-2 bg-transparent border-b-2 border-brown-600 dark:border-blue-500 focus:outline-none focus:border-brown-900 dark:focus:border-blue-300 transition-colors text-brown-800 dark:text-blue-100",placeholder:"Enter your AWS Region (e.g., us-east-1)"})]})]}),s.jsx("p",{className:"text-xs text-brown-600 dark:text-blue-400 mt-4",children:"These credentials will be securely stored and used to connect to your AWS DynamoDB database."})]})}),p=(0,o.Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),f=(0,a.forwardRef)((e,t)=>{let[r,n]=(0,a.useState)(""),[o,c]=(0,a.useState)(!1),{state:i,dispatch:b}=(0,l.a)();return(0,a.useImperativeHandle)(t,()=>({getConfig:()=>({connectionString:r})})),(0,a.useEffect)(()=>{(async()=>{i.dbConfig?.type==="mongo"?n(i.dbConfig.config.connectionString||""):n(process.env.NEXT_PUBLIC_MONGODB_URI||"")})()},[i.dbConfig]),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"connectionString",className:"block text-sm font-medium text-brown-800 dark:text-blue-200",children:"Connection String"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:s.jsx(p,{className:"h-4 w-4 text-brown-600 dark:text-blue-400"})}),s.jsx("input",{id:"connectionString",type:o?"text":"password",value:r,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-10 py-2 bg-transparent border-b-2 border-brown-600 dark:border-blue-500 focus:outline-none focus:border-brown-900 dark:focus:border-blue-300 transition-colors text-brown-800 dark:text-blue-100",placeholder:"mongodb://username:password@host:port/database"}),s.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-brown-600 dark:text-blue-400 hover:text-brown-800 dark:hover:text-blue-200",children:o?s.jsx(d,{className:"h-4 w-4"}):s.jsx(u,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("p",{className:"text-xs text-brown-600 dark:text-blue-400 mt-4",children:["For MongoDB: ",s.jsx("span",{className:"font-mono",children:"mongodb://username:password@host:port/database"}),s.jsx("br",{}),"For MySQL: ",s.jsx("span",{className:"font-mono",children:"mysql://username:password@host:port/database"}),s.jsx("br",{}),"For PostgreSQL: ",s.jsx("span",{className:"font-mono",children:"postgresql://username:password@host:port/database"})]})]})});r(5424);var m=r(6242),g=(0,m.$)("b972c7f1ab6d0603a1c99b74ffcb332ec62f2c59");function h(){let[e,t]=(0,a.useState)("aws"),[r,o]=(0,a.useState)(!1),[i,d]=(0,a.useState)(null),u=(0,n.useRouter)(),{state:b,dispatch:p}=(0,l.a)(),m=(0,a.useRef)(null),h=(0,a.useRef)(null),y=async()=>{try{let t;if(o(!0),d(null),"aws"===e&&m.current)t={type:"aws",config:m.current.getConfig()};else if("mongo"===e&&h.current)t={type:"mongo",config:h.current.getConfig()};else throw Error("Could not get configuration");p({type:"DB_CONFIG",payload:t}),await g(t)?(d({type:"success",text:"Database configuration saved successfully"}),setTimeout(()=>u.push("/"),1500)):d({type:"error",text:"Failed to save database configuration"})}catch(e){console.error("Error saving settings:",e),d({type:"error",text:"An error occurred while saving settings"})}finally{o(!1)}};return(0,s.jsxs)("div",{className:"w-full max-w-md",children:[s.jsx("h1",{className:"text-4xl font-eb-garamond mb-8 text-center text-brown-900 dark:text-blue-100",children:"Database Settings"}),(0,s.jsxs)("div",{className:"bg-parchment-dark dark:bg-navy-900 p-8 rounded-lg shadow-lg border-2 border-brown-600 dark:border-blue-700",children:[(0,s.jsxs)("div",{className:"flex mb-6 border-b border-brown-600 dark:border-blue-700",children:[s.jsx("button",{className:`flex-1 py-2 px-4 font-eb-garamond text-lg ${"aws"===e?"border-b-2 border-brown-800 dark:border-blue-500 text-brown-900 dark:text-blue-100":"text-brown-600 dark:text-blue-400 hover:text-brown-800 dark:hover:text-blue-200"}`,onClick:()=>t("aws"),children:"AWS DynamoDB"}),s.jsx("button",{className:`flex-1 py-2 px-4 font-eb-garamond text-lg ${"mongo"===e?"border-b-2 border-brown-800 dark:border-blue-500 text-brown-900 dark:text-blue-100":"text-brown-600 dark:text-blue-400 hover:text-brown-800 dark:hover:text-blue-200"}`,onClick:()=>t("mongo"),children:"MongoDB / SQL"})]}),s.jsx("div",{className:"mt-4",children:"aws"===e?s.jsx(x,{ref:m}):s.jsx(f,{ref:h})}),i&&s.jsx("div",{className:`mt-4 p-2 rounded ${"success"===i.type?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-100"}`,children:i.text}),(0,s.jsxs)("div",{className:"mt-6 flex justify-between",children:[s.jsx("button",{onClick:()=>u.push("/"),className:"px-4 py-2 font-eb-garamond border border-brown-600 dark:border-blue-700 text-brown-800 dark:text-blue-200 rounded-md hover:bg-brown-100 dark:hover:bg-blue-900 transition-colors focus:outline-none focus:ring-2 focus:ring-brown-600 dark:focus:ring-blue-500 focus:ring-opacity-50",children:"Cancel"}),(0,s.jsxs)("button",{onClick:y,disabled:r,className:`px-4 py-2 font-eb-garamond bg-brown-700 dark:bg-blue-800 text-parchment dark:text-blue-100 rounded-md hover:bg-brown-800 dark:hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-brown-600 dark:focus:ring-blue-500 focus:ring-opacity-50 flex items-center ${r?"opacity-70 cursor-not-allowed":""}`,children:[s.jsx(c,{className:"mr-2",size:18}),r?"Saving...":"Save Settings"]})]})]})]})}(0,m.$)("a03868e9a7215603f9d673cd4ee1cd7a48e8acaa"),(0,m.$)("f20badd17b67320a503118ef51c8ac258764e88b")},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},7322:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\Users\My PC\mern\diary\web\app\settings\page.tsx#default`)},228:(e,t,r)=>{"use strict";r.r(t),r.d(t,{get:()=>p,insert:()=>x,updateDatabaseConfig:()=>f});var s=r(7745);r(6461);var a=r(9515);let n=require("mongodb");var o=r(6447),c=r(5723);let l=()=>process.env.MONGODB_URI||"",i=async()=>{let e=l();if(!e)throw Error("MongoDB connection string not found");return new n.MongoClient(e)};async function d(e,t,r){try{if(!await (0,o.default)(r))return!1;let s=await i();try{await s.connect();let r=s.db("diary").collection("entries"),a={date:new Date().toLocaleString(),content:t,title:e};return await r.insertOne(a),!0}finally{await s.close()}}catch(e){return console.error("MongoDB Insert Error:",e),!1}}async function u(e){try{if(!await (0,o.default)(e))return null;let t=await i();try{await t.connect();let e=t.db("diary").collection("entries");return await e.find({}).toArray()}finally{await t.close()}}catch(e){return console.error("MongoDB Get Error:",e),null}}(0,c.h)([d,u]),(0,s.j)("34f1a80e752b3fb1d3707a5c708770c68aa94807",d),(0,s.j)("01bf424d0771862e8014b510682874bc64a93be6",u);let b=()=>process.env.MONGODB_URI?"mongo":"aws";async function x(e,t,r){return"mongo"===b()?d(e,t,r):a.insert(e,t,r)}async function p(e){return"mongo"===b()?u(e):a.get(e)}async function f(e){try{if("aws"===e.type){let t=e.config;process.env.AWS_ACCESS_KEY_ID=t.accessKeyId,process.env.AWS_SECRET_ACCESS_KEY=t.secretKey,process.env.AWS_REGION=t.region,process.env.MONGODB_URI=""}else if("mongo"===e.type){let t=e.config;process.env.MONGODB_URI=t.connectionString,process.env.AWS_ACCESS_KEY_ID="",process.env.AWS_SECRET_ACCESS_KEY="",process.env.AWS_REGION=""}return!0}catch(e){return console.error("Error updating database configuration:",e),!1}}(0,c.h)([x,p,f]),(0,s.j)("a03868e9a7215603f9d673cd4ee1cd7a48e8acaa",x),(0,s.j)("f20badd17b67320a503118ef51c8ac258764e88b",p),(0,s.j)("b972c7f1ab6d0603a1c99b74ffcb332ec62f2c59",f)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[666,362,785,939],()=>r(4564));module.exports=s})();